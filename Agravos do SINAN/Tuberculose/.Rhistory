bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = formas_clinicas)) + geom_line() +
theme_minimal() + ggtitle("Número de intoxicações em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
tipo_classif <- c("PB - Paucibacilar", "MB - Multibacilar")
funcao_propria <- function(tipo_classif){
base_intox %>%
filter(classif_op == tipo_classif) %>%
group_by(classif_op, uf, mes_ano) %>%
summarise(total = n())
}
bases_classif <- tibble()
for (class in tipo_classif){
intermed <- funcao_propria(tipo_classif = class)
bases_classif <- rbind(intermed, bases_classif)
}
tipo_classif <- c("PB - Paucibacilar", "MB - Multibacilar")
funcao_propria <- function(tipo_classif){
base_hans %>%
filter(classif_op == tipo_classif) %>%
group_by(classif_op, uf, mes_ano) %>%
summarise(total = n())
}
bases_classif <- tibble()
for (class in tipo_classif){
intermed <- funcao_propria(tipo_classif = class)
bases_classif <- rbind(intermed, bases_classif)
}
b <- bases_classif %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = classif)) + geom_line() + theme_minimal()+ ggtitle("Classificação de operação em Goiás - Hanseníase (SINAN - 2021)")
plotly::ggplotly(b)
b <- bases_classif %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = classif_op)) + geom_line() + theme_minimal()+ ggtitle("Classificação de operação em Goiás - Hanseníase (SINAN - 2021)")
plotly::ggplotly(b)
b <- bases_classif %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = classif_op)) + geom_line() + theme_minimal()+ ggtitle("Classificação - Hanseníase em Goiás (SINAN - 2021)")
plotly::ggplotly(b)
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = formas_clinicas)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de hanseníase por formas clínicas da doença em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
setwd("~/GitHub/dimensionamento/Agravos do SINAN/Tuberculose")
Tuberculose <- read.dbc::read.dbc("TUBEBR21.dbc")
Tuberculose <- read.dbc::read.dbc("TUBEBR21.dbc")
base_tube <- Tuberculose %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                   NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(diagnosticos = case_when(BACILOSC_E == 1 ~ "Positiva",
BACILOSC_E == 2 ~ "Negativa",
BACILOSC_E == 3 ~ "Não realizada",
BACILOSC_E == 4 ~ "Não se aplica" ))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
library(read.dbc)
setwd("~/GitHub/dimensionamento/Agravos do SINAN/Tuberculose")
Tuberculose <- read.dbc::read.dbc("TUBEBR21.dbc")
base_tube <- Tuberculose %>%
mutate(diagnosticos = case_when(BACILOSC_E == 1 ~ "Positiva",
BACILOSC_E == 2 ~ "Negativa",
BACILOSC_E == 3 ~ "Não realizada",
BACILOSC_E == 4 ~ "Não se aplica" ))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
View(Tuberculose)
base_tube <- Tuberculose %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                  NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(diagnosticos = case_when(BACILOSC_E == 1 ~ "Positiva",
BACILOSC_E == 2 ~ "Negativa",
BACILOSC_E == 3 ~ "Não realizada",
BACILOSC_E == 4 ~ "Não se aplica" ))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
diagnostico <- c("Positiva","Negativa")
funcao_propria <- function(diagnostico){
base_tube %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de tuberculose em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
glimpse(Tuberculose)
base_hans <- Hanseniase %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                   NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(formas_clinicas = case_when(FORMACLINI == 1 ~ "I - Indeterminada",
FORMACLINI == 2 ~ "T - Tuberculóide",
FORMACLINI == 3 ~ "D - Dimorfa",
FORMACLINI == 4 ~ "V - Virchowiana",
FORMACLINI == 5 ~ "Não classificado" ))%>%
mutate(classif_op = case_when(CLASSOPERA == 1 ~ "PB - Paucibacilar",
CLASSOPERA == 2 ~ "MB - Multibacilar"))%>%
mutate(incap_fisica_cura = case_when(AVAL_ATU_N == 0 ~ "Grau zero",
AVAL_ATU_N == 1 ~ "Grau 1",
AVAL_ATU_N == 2 ~ "Grau 2",
AVAL_ATU_N == 3 ~ "Não avaliado",
AVAL_ATU_N == 9 ~ "Ignorado"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
glimpse(Hanseniase)
glimpse(base_hans)
base_hans <- Hanseniase %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                   NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(formas_clinicas = case_when(FORMACLINI == 1 ~ "I - Indeterminada",
FORMACLINI == 2 ~ "T - Tuberculóide",
FORMACLINI == 3 ~ "D - Dimorfa",
FORMACLINI == 4 ~ "V - Virchowiana",
FORMACLINI == 5 ~ "Não classificado" ))%>%
mutate(classif_op = case_when(CLASSOPERA == 1 ~ "PB - Paucibacilar",
CLASSOPERA == 2 ~ "MB - Multibacilar"))%>%
mutate(incap_fisica_cura = case_when(AVAL_ATU_N == "00" ~ "Grau zero",
AVAL_ATU_N == "01" ~ "Grau 1",
AVAL_ATU_N == "02" ~ "Grau 2",
AVAL_ATU_N == "03" ~ "Não avaliado",
AVAL_ATU_N == "09" ~ "Ignorado"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
glimpse(base_hans)
base_hans <- Hanseniase %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                   NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(formas_clinicas = case_when(FORMACLINI == 1 ~ "I - Indeterminada",
FORMACLINI == 2 ~ "T - Tuberculóide",
FORMACLINI == 3 ~ "D - Dimorfa",
FORMACLINI == 4 ~ "V - Virchowiana",
FORMACLINI == 5 ~ "Não classificado" ))%>%
mutate(classif_op = case_when(CLASSOPERA == 1 ~ "PB - Paucibacilar",
CLASSOPERA == 2 ~ "MB - Multibacilar"))%>%
mutate(incap_fisica_cura = case_when(AVAL_ATU_N == 0 ~ "Grau zero",
AVAL_ATU_N == 01 ~ "Grau 1",
AVAL_ATU_N == 02 ~ "Grau 2",
AVAL_ATU_N == 03 ~ "Não avaliado",
AVAL_ATU_N == 09 ~ "Ignorado"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
glimpse(base_hans)
View(base_hans)
forma_clinica <- c("Grau zero","Grau 1","Grau 2","Não avaliado")
funcao_propria <- function(forma_clinica){
base_hans %>%
filter(formas_clinicas == forma_clinica) %>%
group_by(formas_clinicas, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (form_clin in forma_clinica){
intermed <- funcao_propria(forma_clinica = form_clin)
bases <- rbind(intermed, bases)
}
forma_clinica <- c("Grau zero","Grau 1","Grau 2","Não avaliado")
funcao_propria <- function(forma_clinica){
base_hans %>%
filter(formas_clinicas == forma_clinica) %>%
group_by(formas_clinicas, uf, mes_ano) %>%
summarise(total = n())
}
bases_fisca <- tibble()
for (form_clin in forma_clinica){
intermed <- funcao_propria(forma_clinica = form_clin)
bases_fisica <- rbind(intermed, bases_fisica)
}
forma_clinica <- c("Grau zero","Grau 1","Grau 2","Não avaliado")
funcao_propria <- function(forma_clinica){
base_hans %>%
filter(formas_clinicas == forma_clinica) %>%
group_by(formas_clinicas, uf, mes_ano) %>%
summarise(total = n())
}
bases_fisica <- tibble()
for (form_clin in forma_clinica){
intermed <- funcao_propria(forma_clinica = form_clin)
bases_fisica <- rbind(intermed, bases_fisica)
}
incap_fisica <- c("Grau zero","Grau 1","Grau 2","Não avaliado")
funcao_propria <- function(incap_fisica){
base_hans %>%
filter(incap_fisica_cura == incap_fisica) %>%
group_by(incap_fisica_cura, uf, mes_ano) %>%
summarise(total = n())
}
bases_fisica <- tibble()
for (fisica in incap_fisica){
intermed <- funcao_propria(incap_fisica = fisica)
bases_fisca <- rbind(intermed, bases_fisica)
}
c <- bases_fisica%>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = incap_fisica_cura)) + geom_line() + theme_minimal()+ ggtitle("Incapacidade física no momento da cura - Hanseníase em Goiás (SINAN - 2021)")
base_hans <- Hanseniase %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                   NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(formas_clinicas = case_when(FORMACLINI == 1 ~ "I - Indeterminada",
FORMACLINI == 2 ~ "T - Tuberculóide",
FORMACLINI == 3 ~ "D - Dimorfa",
FORMACLINI == 4 ~ "V - Virchowiana",
FORMACLINI == 5 ~ "Não classificado" ))%>%
mutate(classif_op = case_when(CLASSOPERA == 1 ~ "PB - Paucibacilar",
CLASSOPERA == 2 ~ "MB - Multibacilar"))%>%
mutate(incap_fisica_cura = case_when(AVAL_ATU_N == 0 ~ "Grau zero",
AVAL_ATU_N == 01 ~ "Grau 1",
AVAL_ATU_N == 02 ~ "Grau 2",
AVAL_ATU_N == 03 ~ "Não avaliado",
AVAL_ATU_N == 09 ~ "Ignorado"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
c <- bases_fisica%>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = incap_fisica_cura)) + geom_line() + theme_minimal()+ ggtitle("Incapacidade física no momento da cura - Hanseníase em Goiás (SINAN - 2021)")
base_hans %>%
filter(incap_fisica_cura == incap_fisica) %>%
group_by(incap_fisica_cura, uf, mes_ano) %>%
summarise(total = n())
View(bases_fisca)
funcao_propria <- function(incap_fisica){
base_hans %>%
filter(incap_fisica_cura == incap_fisica) %>%
group_by(incap_fisica_cura, uf, mes_ano) %>%
summarise(total = n())
}
bases_fisica <- tibble()
for (fisica in incap_fisica){
intermed <- funcao_propria(incap_fisica = fisica)
bases_fisica <- rbind(intermed, bases_fisica)
}
c <- bases_fisica%>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = incap_fisica_cura)) + geom_line() + theme_minimal()+ ggtitle("Incapacidade física no momento da cura - Hanseníase em Goiás (SINAN - 2021)")
plotly::ggplotly(c)
knitr::opts_chunk$set(echo = TRUE)
setwd("~/GitHub/dimensionamento/Agravos do SINAN/Dengue")
library(tidyverse)
library(lubridate)
library(read.dbc)
Dengue  <- read.dbc::read.dbc("DENGBR21.dbc")
setwd("~/GitHub/dimensionamento/Agravos do SINAN/Dengue")
Dengue  <- read.dbc::read.dbc("DENGBR21.dbc")
base_dengue <- Dengue %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                  NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(diagnosticos = case_when(CLASSI_FIN == 1 ~ "Positiva",
CLASSI_FIN == 2 ~ "Negativa",
CLASSI_FIN == 3 ~ "Não realizada",
CLASSI_FIN == 4 ~ "Não se aplica" ))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
base_dengue <- Dengue %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                  NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(diagnosticos = case_when(CLASSI_FIN == 5 ~ "Descartado",
CLASSI_FIN == 10 ~ "Dengue",
CLASSI_FIN == 11 ~ "Dengue com sinais de alarme",
CLASSI_FIN == 12 ~ "Dengue grave",
CLASSI_FIN == 13 ~ "Chikungunya"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave")
funcao_propria <- function(diagnostico){
base_tube %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
plotly::ggplotly(a)
View(a)
View(bases)
glimpse(Dengue)
glimpse(base_dengue)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave")
funcao_propria <- function(diagnostico){
base_tube %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
View(intermed)
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave","Chikungunya")
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
View(bases)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave","Chikungunya")
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
View(bases)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave")
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave")
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
View(intermed)
View(bases)
View(base_dengue)
glimpse(base_dengue$diagnosticos)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave","Chikungunya")
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
a <- bases %>%
filter(uf == "Goiás") %>%
ggplot(aes(x = mes_ano, y = total, col = diagnosticos)) + geom_line() +
theme_minimal() + ggtitle("Número de casos de Dengue em Goiás (SINAN - 2021)")
plotly::ggplotly(a)
base_dengue <- Dengue %>%
mutate(faixa_etaria = case_when(NU_IDADE_N < 4000 ~ "Menor que 1 ano",
NU_IDADE_N >= 4000 & NU_IDADE_N < 4005 ~ "Entre 1 e 4 anos",                                   NU_IDADE_N >= 4005 & NU_IDADE_N < 4015 ~ "Entre 5 e 14 anos",                                  NU_IDADE_N >= 4015 & NU_IDADE_N < 4025 ~ "Entre 15 e 24 anos",
NU_IDADE_N >= 4025 & NU_IDADE_N < 4035 ~ "Entre 25 e 34 anos",
NU_IDADE_N >= 4035 & NU_IDADE_N < 4045 ~ "Entre 35 e 44 anos",
NU_IDADE_N >= 4045 & NU_IDADE_N < 4055 ~ "Entre 45 e 54 anos",
NU_IDADE_N >= 4055 & NU_IDADE_N < 4065 ~ "Entre 55 e 64 anos",
NU_IDADE_N >= 4065 ~ "65 ou mais "))%>%
mutate(diagnosticos = case_when(CLASSI_FIN == 5 ~ "Descartado",
CLASSI_FIN == 10 ~ "Dengue",
CLASSI_FIN == 11 ~ "Dengue com sinais de alarme",
CLASSI_FIN == 12 ~ "Dengue grave",
CLASSI_FIN == 13 ~ "Chikungunya"))%>%
mutate(mes_ano = ymd(DT_NOTIFIC),
mes_ano = format_ISO8601(mes_ano, precision = "ym"),
mes_ano = ym(mes_ano)) %>%
left_join(df_territorial, by = c("ID_MN_RESI" = "cod_municipio"))
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
View(intermed)
diagnostico <- c("Dengue","Dengue com sinais de alarme","Dengue grave")
funcao_propria <- function(diagnostico){
base_dengue %>%
filter(diagnosticos == diagnostico) %>%
group_by(diagnosticos, uf, mes_ano) %>%
summarise(total = n())
}
bases <- tibble()
for (diag in diagnostico){
intermed <- funcao_propria(diagnostico = diag)
bases <- rbind(intermed, bases)
}
