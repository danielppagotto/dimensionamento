<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Needs-based health workforce planning for pregnancy care in Brazil</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="analises hrh_files/libs/clipboard/clipboard.min.js"></script>
<script src="analises hrh_files/libs/quarto-html/quarto.js"></script>
<script src="analises hrh_files/libs/quarto-html/popper.min.js"></script>
<script src="analises hrh_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analises hrh_files/libs/quarto-html/anchor.min.js"></script>
<link href="analises hrh_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analises hrh_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analises hrh_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analises hrh_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analises hrh_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="analises hrh_files/libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="analises hrh_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="analises hrh_files/libs/datatables-binding-0.25/datatables.js"></script>
<script src="analises hrh_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="analises hrh_files/libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="analises hrh_files/libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="analises hrh_files/libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="analises hrh_files/libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="analises hrh_files/libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Needs-based health workforce planning for pregnancy care in Brazil</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">

</div>
<section id="calculating-demand" class="level1">
<h1>Calculating Demand</h1>
<section id="target-population" class="level2">
<h2 class="anchored" data-anchor-id="target-population">Target Population</h2>
<p>At first we will access SINASC projections data. These projections were calculated by two co-authors. Multilayer Perceptron (MLP) algorithm registered the best results among other machine learning and statistics technics.</p>
<p>We will deduce the population covered by health insurance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#reading and selecting variables</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"~/GitHub/dimensionamento/05_Gestantes/05_python/previsoes_go.xlsx"</span>) <span class="sc">|&gt;</span>   </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(codibge, data, qtd) <span class="sc">|&gt;</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">mutate</span>(<span class="at">qtd =</span> <span class="fu">round</span>(qtd))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"~/GitHub/dimensionamento/05_Gestantes/05_python/beneficiarios_plano_saude.csv"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(mes <span class="sc">==</span> <span class="st">"06"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">perc_sus =</span> (<span class="dv">100</span> <span class="sc">-</span> percentual_pop_coberta)<span class="sc">/</span><span class="dv">100</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(cod_regsaud, perc_sus) </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  predictions <span class="sc">|&gt;</span>  </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(health_insurance, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"codibge"</span><span class="ot">=</span><span class="st">"cod_regsaud"</span>)) <span class="sc">|&gt;</span>  </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">qtd_sus =</span> <span class="fu">round</span>(qtd <span class="sc">*</span> perc_sus)) <span class="sc">|&gt;</span> </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">as.character</span>(data))</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(predictions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-964664bd1dc8b742be1c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-964664bd1dc8b742be1c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649"],[52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001,52002,52011,52004,52013,52017,52014,52015,52016,52018,52003,52005,52006,52007,52008,52009,52010,52012,52001],["2022-12-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-01-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-02-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-03-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-04-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-05-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-06-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-07-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-08-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-09-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-10-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-11-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2023-12-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-01-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-02-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-03-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-04-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-05-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-06-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-07-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-08-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-09-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-10-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-11-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2024-12-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-01-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-02-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-03-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-04-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-05-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-06-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-07-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-08-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-09-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-10-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-11-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01","2025-12-01"],[2228,1105,637,1044,177,278,119,528,276,182,335,323,60,129,156,123,115,232,2337,1107,596,1018,166,276,137,536,265,189,331,337,69,116,151,118,114,217,2170,1224,683,1118,189,292,149,547,306,196,335,349,72,135,161,122,116,218,2465,1229,714,1141,176,287,146,541,305,196,330,367,69,130,170,126,119,240,2361,1180,703,1135,186,282,146,535,314,199,328,369,66,135,176,116,134,241,2429,1154,653,1142,186,272,136,531,276,203,327,333,66,135,171,117,124,250,2311,1123,656,1056,177,255,127,530,270,203,324,320,70,127,167,119,122,252,2211,1148,676,1069,178,254,116,513,273,200,318,333,73,133,168,123,118,256,2176,1132,659,1064,182,248,128,513,276,195,326,334,70,125,166,125,125,250,2276,1100,669,1072,176,246,130,509,258,187,319,316,68,124,165,127,120,239,2232,1036,633,1006,178,253,121,512,263,189,324,319,66,133,156,127,116,241,2124,1065,692,985,178,259,130,511,265,180,327,324,65,128,156,125,113,256,2181,1129,630,1033,178,274,125,521,268,183,328,327,69,133,158,132,113,243,2310,1125,588,1035,170,272,136,523,271,179,327,366,70,125,155,130,111,231,2104,1230,687,1104,179,287,147,532,301,186,322,367,66,138,162,125,109,233,2496,1237,720,1165,169,288,142,535,289,189,319,365,66,139,170,121,115,237,2391,1199,699,1146,182,279,142,524,309,190,311,372,68,136,176,125,121,242,2401,1165,670,1144,179,266,129,519,281,190,309,329,73,135,173,126,118,248,2320,1120,654,1079,186,256,127,500,278,187,305,318,71,131,166,131,122,253,2271,1162,671,1057,183,250,110,492,281,186,302,331,70,132,168,131,117,255,2263,1138,680,1071,185,246,126,492,279,180,311,323,71,128,166,130,120,251,2331,1105,671,1074,178,243,132,494,273,176,308,317,70,126,165,129,119,243,2257,1038,641,1022,180,246,119,497,268,169,313,328,69,129,158,130,123,242,2134,1077,701,981,176,255,130,499,270,170,309,323,73,123,156,129,110,249,2252,1119,641,1001,175,271,127,508,274,171,305,335,73,131,158,126,115,253,2340,1100,604,1047,177,268,132,510,270,172,304,347,75,128,156,127,114,240,2148,1211,692,1071,174,284,144,509,296,175,298,357,73,136,160,128,112,233,2504,1227,730,1140,174,287,137,505,286,177,296,360,75,136,169,127,117,233,2446,1186,719,1121,181,278,141,499,308,179,292,354,79,138,174,131,118,234,2443,1152,701,1129,178,264,128,503,286,181,295,322,77,139,173,132,118,238,2300,1126,658,1061,182,253,131,487,274,182,295,320,74,133,169,132,121,240,2280,1163,670,1016,185,247,118,479,271,182,300,326,73,131,167,129,119,249,2258,1125,685,1045,188,243,129,478,279,180,302,322,73,130,167,128,118,248,2365,1098,675,1046,188,244,131,480,277,180,304,314,72,129,165,127,119,250,2287,1036,644,1021,187,243,124,483,272,175,304,338,76,130,159,126,124,247,2170,1048,698,982,179,251,134,482,267,173,305,332,78,125,156,127,113,247,2214],[0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125,0.7536,0.7244,0.8614,0.8551,0.6126,0.8483,0.642,0.6754,0.7888,0.8856,0.6996,0.9466,0.9426,0.9141,0.9276,0.8818,0.9214,0.5125],[1142,833,461,899,151,170,101,339,186,144,297,226,57,122,143,114,101,214,1198,834,432,877,142,169,116,344,179,149,293,236,65,109,138,109,101,200,1112,922,495,963,162,179,126,351,207,155,297,244,68,127,147,113,102,201,1263,926,517,983,150,176,124,347,206,155,292,257,65,123,155,117,105,221,1210,889,509,978,159,173,124,343,212,157,290,258,62,127,161,108,118,222,1245,870,473,984,159,167,115,341,186,160,290,233,62,127,156,109,109,230,1184,846,475,910,151,156,108,340,182,160,287,224,66,120,153,110,108,232,1133,865,490,921,152,156,98,329,184,158,282,233,69,125,154,114,104,236,1115,853,477,917,156,152,109,329,186,154,289,234,66,118,152,116,110,230,1166,829,485,923,150,151,110,327,174,148,283,221,64,117,151,118,106,220,1144,781,459,867,152,155,103,329,178,149,287,223,62,125,143,118,102,222,1089,803,501,848,152,159,110,328,179,142,290,227,62,121,143,116,100,236,1118,851,456,890,152,168,106,334,181,144,290,229,65,125,144,122,100,224,1184,848,426,892,145,167,115,336,183,141,290,256,66,118,142,121,98,213,1078,927,498,951,153,176,125,342,203,147,285,257,62,130,148,116,96,215,1279,932,522,1004,145,176,120,343,195,149,283,255,62,131,155,112,101,218,1225,904,506,987,156,171,120,336,209,150,275,260,64,128,161,116,107,223,1231,878,485,985,153,163,109,333,190,150,274,230,69,127,158,117,104,229,1189,844,474,929,159,157,108,321,188,148,270,222,67,123,152,122,108,233,1164,876,486,910,156,153,93,316,190,147,267,232,66,124,154,122,103,235,1160,858,493,923,158,151,107,316,188,142,275,226,67,121,152,121,106,231,1195,833,486,925,152,149,112,317,184,139,273,222,66,119,151,120,105,224,1157,782,464,880,154,151,101,319,181,133,277,229,65,122,144,121,108,223,1094,812,508,845,150,156,110,320,182,134,274,226,69,116,143,120,97,229,1154,843,464,862,150,166,108,326,185,135,270,234,69,123,144,117,101,233,1199,829,438,902,151,164,112,327,182,136,269,243,71,121,143,118,101,221,1101,913,501,923,149,174,122,327,200,138,264,250,69,128,146,119,99,215,1283,925,529,982,149,176,116,324,193,140,262,252,71,128,154,118,103,215,1254,894,521,966,155,170,120,320,208,141,259,248,75,130,159,122,104,216,1252,868,508,973,152,162,109,323,193,143,261,225,73,131,158,122,104,219,1179,849,477,914,156,155,111,313,185,144,261,224,70,125,154,122,107,221,1168,876,485,875,158,151,100,308,183,144,266,228,69,123,153,120,105,229,1157,848,496,900,161,149,109,307,188,142,267,225,69,123,153,119,104,229,1212,827,489,901,161,149,111,308,187,142,269,220,68,122,151,118,105,230,1172,781,467,879,160,149,105,310,184,138,269,236,72,123,145,117,109,228,1112,790,506,846,153,154,114,309,180,136,270,232,74,118,143,118,100,228,1135]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>codibge<\/th>\n      <th>data<\/th>\n      <th>qtd<\/th>\n      <th>perc_sus<\/th>\n      <th>qtd_sus<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4,5]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="total-services" class="level2">
<h2 class="anchored" data-anchor-id="total-services">Total services</h2>
<p>We will now quantify the number and variety of services need to assist pregnant women and the newborn in the primary health care (PHC) setting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(previsoes_go)){</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  row <span class="ot">&lt;-</span> previsoes_go[i,]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">=</span> <span class="fu">paste</span>(<span class="st">"http://200.137.215.27:5025/calcula_procedimentos?mes_ano="</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">substring</span>(row<span class="sc">$</span>data, <span class="dv">1</span>, <span class="dv">7</span>), </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">"&amp;nascidos_vivos="</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">round</span>(row<span class="sc">$</span>qtd_sus, <span class="dv">0</span>), <span class="at">sep =</span> <span class="st">''</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  temp <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(url)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  servicos <span class="ot">&lt;-</span> <span class="fu">rbind</span>(temp, servicos) </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Chamando:"</span>,url))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="phc-services-and-professionals" class="level2">
<h2 class="anchored" data-anchor-id="phc-services-and-professionals">PHC Services and professionals</h2>
<p>Vamos selecionar apenas os serviços realizados na APS. Em sequência, vamos selecionar apenas aqueles que são executados por médicos ou enfermeiros. Para isso vamos utilizar como referência nossa tabela que relaciona procedimentos e profissionais.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>servicos <span class="ot">&lt;-</span> servicos <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">filter</span>(nivel_atencao <span class="sc">==</span> <span class="st">"APS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lendo-os-dados-de-demanda-e-filtrando-apenas-observações-necessárias" class="level2">
<h2 class="anchored" data-anchor-id="lendo-os-dados-de-demanda-e-filtrando-apenas-observações-necessárias">Lendo os dados de <strong>demanda</strong> e filtrando apenas observações necessárias</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cegonha_go <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"df_prof_go.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">filter</span>(nivel_atencao <span class="sc">==</span> <span class="st">'APS'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">select</span>(regiao, mês_procedimento_realizado, CBO,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                         horas_categoria, fte40) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mutate</span>(<span class="at">prof =</span> <span class="fu">case_when</span>(<span class="fu">substr</span>(CBO, <span class="dv">1</span>, <span class="dv">4</span>) <span class="sc">==</span> <span class="st">"2235"</span> <span class="sc">~</span> <span class="st">"Enfermeiro"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                                            <span class="fu">substr</span>(CBO, <span class="dv">1</span>, <span class="dv">4</span>) <span class="sc">==</span> <span class="st">"2251"</span> <span class="sc">~</span> <span class="st">"Médico"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Outros"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">filter</span>(prof <span class="sc">!=</span> <span class="st">"Outros"</span>) </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>demanda <span class="ot">&lt;-</span> cegonha_go <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(regiao, mês_procedimento_realizado,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>           prof) <span class="sc">%&gt;%</span> </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">fte40_demanda =</span> <span class="fu">sum</span>(fte40)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">regiao =</span> <span class="fu">as.character</span>(regiao)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mês_procedimento_realizado <span class="sc">&gt;</span> <span class="st">"2021-01-01"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
</section>
<section id="lendo-os-dados-de-oferta" class="level2">
<h2 class="anchored" data-anchor-id="lendo-os-dados-de-oferta">Lendo os dados de <strong>oferta</strong></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dremio_host <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"endereco"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dremio_port <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"port"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>dremio_uid <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"uid"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>dremio_pwd <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"datalake"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>channel <span class="ot">&lt;-</span> <span class="fu">odbcDriverConnect</span>(<span class="fu">sprintf</span>(<span class="st">"DRIVER=Dremio Connector;HOST=%s;PORT=%s;UID=%s;PWD=%s;AUTHENTICATIONTYPE=Basic Authentication;CONNECTIONTYPE=Direct"</span>, dremio_host, dremio_port, dremio_uid, dremio_pwd))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>consulta <span class="ot">&lt;-</span> <span class="st">'SELECT * FROM "Analytics Layer".Infraestrutura.Profissionais."Profissionais APS"'</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>oferta_GO <span class="ot">&lt;-</span> <span class="fu">sqlQuery</span>(channel, consulta, </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">as.is =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>producao_SISAB <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"producao_SISAB.xls"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">select</span>(Cod_Regiao_Saude, Porcentagem)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>producao_SISAB<span class="sc">$</span>Cod_Regiao_Saude <span class="ot">=</span> <span class="fu">as.character</span>(producao_SISAB<span class="sc">$</span>Cod_Regiao_Saude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tratando-os-dados-de-oferta" class="level2">
<h2 class="anchored" data-anchor-id="tratando-os-dados-de-oferta">Tratando os dados de oferta</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>oferta <span class="ot">&lt;-</span> oferta_GO <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cod_regsaud =</span> <span class="fu">as.character</span>(cod_regsaud)) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano_mes =</span> <span class="fu">ym</span>(COMPETEN)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">horas =</span> HORAOUTR <span class="sc">+</span> HORAHOSP <span class="sc">+</span> HORA_AMB) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prof =</span> <span class="fu">if_else</span>(<span class="fu">substr</span>(CBO, <span class="dv">1</span>, <span class="dv">4</span>) <span class="sc">==</span> <span class="st">"2235"</span>, <span class="st">"Enfermeiro"</span>, <span class="st">"Médico"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(uf, cod_regsaud, regiao_saude, prof, ano_mes) <span class="sc">%&gt;%</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">horas =</span> <span class="fu">sum</span>(horas)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(producao_SISAB, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"cod_regsaud"</span><span class="ot">=</span><span class="st">"Cod_Regiao_Saude"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fte40 =</span> horas<span class="sc">/</span><span class="dv">126</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">direto =</span> (fte40) <span class="sc">*</span> <span class="fl">0.75</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">liquido =</span> direto <span class="sc">*</span> Porcentagem) <span class="sc">%&gt;%</span> </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano_mes_corrigido =</span> ano_mes <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ano_mes) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'uf', 'cod_regsaud', 'regiao_saude',
'prof'. You can override using the `.groups` argument.</code></pre>
</div>
</div>
</section>
</section>
<section id="comparando-demanda-e-oferta" class="level1">
<h1>Comparando demanda e oferta</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>demanda_oferta <span class="ot">&lt;-</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  demanda <span class="sc">%&gt;%</span>  </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(oferta, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"regiao"</span><span class="ot">=</span><span class="st">"cod_regsaud"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"prof"</span><span class="ot">=</span><span class="st">"prof"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"mês_procedimento_realizado"</span><span class="ot">=</span><span class="st">"ano_mes_corrigido"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(uf <span class="sc">!=</span> <span class="st">"NA"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano =</span> <span class="fu">year</span>(mês_procedimento_realizado)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">resultado =</span> liquido <span class="sc">-</span> fte40_demanda) <span class="sc">%&gt;%</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(regiao, ano, prof,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>           uf, regiao_saude) <span class="sc">%&gt;%</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">resultado =</span> <span class="fu">sum</span>(resultado),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">demanda =</span> <span class="fu">sum</span>(fte40_demanda),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">oferta =</span> <span class="fu">sum</span>(liquido)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="st">'2024'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> (oferta <span class="sc">*</span> <span class="dv">100</span>)<span class="sc">/</span>demanda) <span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">as.integer</span>(regiao)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, prof, resultado, perc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'regiao', 'ano', 'prof', 'uf'. You can
override using the `.groups` argument.</code></pre>
</div>
</div>
</section>
<section id="criando-um-mapa-para" class="level1">
<h1>criando um mapa para</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>spdf <span class="ot">&lt;-</span> <span class="fu">geojson_read</span>(<span class="st">"shape file regioes saude.json"</span>,  <span class="at">what =</span> <span class="st">"sp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>spdf_region <span class="ot">&lt;-</span> spdf[ spdf<span class="sc">@</span>data<span class="sc">$</span>est_id <span class="sc">==</span> <span class="st">"52"</span> , ]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>spdf_fortified <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_as_sf</span>(spdf_region)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>spdf_fortified <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(demanda_oferta, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"reg_id"</span><span class="ot">=</span><span class="st">"id"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> perc)) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#F8766D"</span>, <span class="at">high =</span> <span class="st">"#00BA38"</span>) <span class="sc">+</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>prof, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sf_column %in% names(g): Each row in `x` is expected to match at most 1 row in `y`.
ℹ Row 1 of `x` matches multiple rows.
ℹ If multiple matches are expected, set `multiple = "all"` to silence this
  warning.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="analises-hrh_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>